<script>
  $(document).ready(function(){
    if($("#resident-select").val() == "State") {
      $("#text-field-div").show();
      $("#resident-search-text").show();
      $("#resident-search-text").attr("placeholder", "ex. TX");

      $("#resident-start-div").hide();
      $("#resident-end-div").hide();
      $("#resident-start-date").hide();
      $("#resident-end-date").hide();
      $("#resident-start-date").removeAttr('required');
      $("#resident-end-date").removeAttr('required');
    } else if($("#resident-select").val() == "Dates") {
      $("#text-field-div").hide();
      $("#resident-search-text").hide();
      $("#resident-search-text").removeAttr('required');

      $("#resident-start-div").show();
      $("#resident-end-div").show();
      $("#resident-start-date").show();
      $("#resident-end-date").show();
    } else {
      $("#text-field-div").show();
      $("#resident-search-text").show();
      $("#resident-search-text").attr("placeholder", "");

      $("#resident-start-div").hide();
      $("#resident-end-div").hide();
      $("#resident-start-date").hide();
      $("#resident-end-date").hide();
      $("#resident-start-date").removeAttr('required');
      $("#resident-end-date").removeAttr('required');
    }

    $("#resident-select").on("change", function () {
      $("#resident-search-text").attr("value", "");
      if($(this).val() == "State") {
        $("#text-field-div").show();
        $("#resident-search-text").show();
        $("#resident-search-text").attr("placeholder", "ex. TX");

        $("#resident-start-div").hide();
        $("#resident-end-div").hide();
        $("#resident-start-date").hide();
        $("#resident-end-date").hide();
        $("#resident-start-date").removeAttr('required');
        $("#resident-end-date").removeAttr('required');
      } else if($(this).val() == "Dates") {
        $("#text-field-div").hide();
        $("#resident-search-text").hide();
        $("#resident-search-text").removeAttr('required');

        $("#resident-start-div").show();
        $("#resident-end-div").show();
        $("#resident-start-date").show();
        $("#resident-end-date").show();
      } else {
        $("#text-field-div").show();
        $("#resident-search-text").show();
        $("#resident-search-text").attr("placeholder", "");

        $("#resident-start-div").hide();
        $("#resident-end-div").hide();
        $("#resident-start-date").hide();
        $("#resident-end-date").hide();
        $("#resident-start-date").removeAttr('required');
        $("#resident-end-date").removeAttr('required');
      }
    });


    $("#official-select").on("change", function () {
      $("#official-search-text").attr("value", "");
      if($(this).val() == "State") {
        $("#official-search-text").attr("placeholder", "ex. TX");
      } else {
        $("#official-search-text").attr("placeholder", "");
      }
    });

    $("#admin-deactivated-select").on("change", function () {
      $("#admin-deactivated-search-text").attr("value", "");
      if($(this).val() == "State") {
        $("#admin-deactivated-search-text").attr("placeholder", "ex. TX");
      } else {
        $("#admin-deactivated-search-text").attr("placeholder", "");
      }
    });

    $("#admin-flagged-select").on("change", function () {
      $("#admin-flagged-search-text").attr("value", "");
      if($(this).val() == "State") {
        $("#admin-flagged-search-text").attr("placeholder", "ex. TX");
      } else {
        $("#admin-flagged-search-text").attr("placeholder", "");
      }
    });
  });
</script>


<%= form_tag(@search_submit_path, method: :get, class: "mx-auto") do %>
  <div class="d-md-flex justify-content-center mb-4">
    <div class="m-2">
      <% if current_page?('/flagged-reports') %>
        <%= select_tag :admin_flagged_search_type, options_for_select(["Incident No.", "Category", "Address", "City", "State", "Zip", "Description"], @admin_flagged_search_type), class: "form-select", id: 'admin-flagged-select' %>
      <% elsif current_page?('/deactivated-reports') %>
        <%= select_tag :admin_deactivated_search_type, options_for_select(["Incident No.", "Category", "Address", "City", "State", "Zip", "Description"], @admin_deactivated_search_type), class: "form-select", id: 'admin-deactivated-select' %>
      <% elsif current_page?('/official') || current_page?('/official-search') %>
        <%= select_tag :official_search_type, options_for_select(["Incident No.", "Status", "Severity", "Category", "Address", "City", "State", "Zip", "Description"], @official_search_type), class: "form-select", id: 'official-select' %>
      <% else %>
        <%= select_tag :resident_search_type, options_for_select(["Dates", "Incident No.", "Category", "Address", "City", "State", "Zip", "Description"], @resident_search_type), class: "form-select", id: 'resident-select' %>
      <% end %>
    </div>
    <div class="m-2 hidden" id="resident-start-div">
      <%= date_field_tag :resident_start_date, @resident_start_date, id: 'resident-start-date', class: "form-control hidden", required: true %>
    </div>
    <div class="m-2 hidden" id="resident-end-div">
      <%= date_field_tag :resident_end_date, @resident_end_date, id: 'resident-end-date', class: "form-control hidden", required: true %>
    </div>
    <div class="m-2 hidden" id="text-field-div">
      <% if current_page?('/flagged-reports') %>
        <%= text_field_tag :admin_flagged_search_term, @admin_flagged_search_term, id: 'admin-flagged-search-text', class: "form-control hidden", size: 50, placeholder: '', pattern: '^[^\s].*$', title: 'No leading or only spaces allowed', required: true %>
      <% elsif current_page?('/deactivated-reports') %>
        <%= text_field_tag :admin_deactivated_search_term, @admin_deactivated_search_term, id: 'admin-deactivated-search-text', class: "form-control hidden", size: 50, placeholder: '', pattern: '^[^\s].*$', title: 'No leading or only spaces allowed', required: true %>
      <% elsif current_page?('/official') || current_page?('/official-search') %>
        <%= text_field_tag :official_search_term, @official_search_term, id: 'official-search-text', class: "form-control hidden", size: 50, placeholder: '', pattern: '^[^\s].*$', title: 'No leading or only spaces allowed', required: true %>
      <% else %>
        <%= text_field_tag :resident_search_term, @resident_search_term, id: 'resident-search-text', class: "form-control hidden", size: 50, placeholder: '', pattern: '^[^\s].*$', title: 'No leading or only spaces allowed', required: true %>
      <% end %>
    </div>
    <div class="m-2">
      <%= submit_tag("Search", :value=>"Search", :id=>"search-button", :class=>"btn btn-primary", :name=>"submit") %>
    </div>
    <div class="m-2">
      <%= submit_tag("Clear", :value=>"Clear", :id=>"clear-button", :disabled=>(@reports_cleared == true), :class=>"btn btn-primary", :name=>"submit") %>
    </div>
  </div>
<% end %>
