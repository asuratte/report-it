<h1 class="text-center mb-4">Resident Dashboard</h1>
<div class="row justify-content-between gy-5">
  <div class="col-lg-5">
    <h2 class="text-center mb-3">Create New Report</h2>
    <p>To create a new report, start by selecting a category below.</p>
    <div class="accordion accordion-flush" id="accordionCategories">
      <% get_categories.each_with_index do |category, i| %>
        <div class="accordion-item">
          <h2 class="accordion-header p-0" id="category<%= i %>">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapse<%= i %>" aria-expanded="true" aria-controls="collapse<%= i %>">
              <%= category.upcase %>
            </button>
          </h2>

          <div id="collapse<%= i %>" class="accordion-collapse collapse" aria-labelledby="heading<%= i %>"
            data-bs-parent="#accordionCategories">
            <div class="accordion-body p-2">
              <div class="list-group">
                <% get_subcategories_by_category(category).each do |subcategory| %>
                  <%= link_to subcategory, new_report_path(category: category, subcategory: subcategory),
                    class: "py-1 list-group-item list-group-item-action" %>
                  <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <div class="col-lg-6">
    <h2 class="text-center mb-3">My Reports</h2>
    <table class="mb-3">
      <thead>
        <tr>
          <th>Date Reported</th>
          <th>Report Type</th>
          <th>Status</th>
        </tr>
      </thead>

      <tbody>
        <% if @reports.count> 0 %>
          <% @reports.each do |report| %>
            <tr class="<%= cycle('list_line_odd', 'list_line_even') %>">
              <td>
                <%= report.created_at.to_date %>
              </td>
              <td>
                <%= link_to report.subcategory, report %>
              </td>
              <td>
                <%= report.status %>
              </td>
            </tr>
          <% end %>
          <% else %>
            <tr>
              <td colspan="3" class="py-3">You have not submitted any reports.</td>
            </tr>
          <% end %>
      </tbody>
    </table>
    <%== pagy_bootstrap_nav(@pagy) if @pagy.pages> 1 %>
  </div>
</div>